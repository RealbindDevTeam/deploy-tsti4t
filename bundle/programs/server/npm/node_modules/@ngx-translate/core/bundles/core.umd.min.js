!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/core"),require("rxjs/observable/of"),require("rxjs/Observable"),require("rxjs/operators")):"function"==typeof define&&define.amd?define(["exports","@angular/core","rxjs/observable/of","rxjs/Observable","rxjs/operators"],e):e((t["ngx-translate"]=t["ngx-translate"]||{},t["ngx-translate"].core={}),t.ng.core,t.Rx.Observable,t.Rx,t.Rx.Observable.prototype)}(this,function(t,e,n,r,a){"use strict";function i(t,e){if(t===e)return!0;if(null===t||null===e)return!1;if(t!=t&&e!=e)return!0;var n,r,a,s=typeof t;if(s==typeof e&&"object"==s){if(!Array.isArray(t)){if(Array.isArray(e))return!1;a=Object.create(null);for(r in t){if(!i(t[r],e[r]))return!1;a[r]=!0}for(r in e)if(!(r in a)&&"undefined"!=typeof e[r])return!1;return!0}if(!Array.isArray(e))return!1;if((n=t.length)==e.length){for(r=0;r<n;r++)if(!i(t[r],e[r]))return!1;return!0}}return!1}function s(t){return void 0!==t&&null!==t}function o(t){return t&&"object"==typeof t&&!Array.isArray(t)}function l(t,e){t=JSON.parse(JSON.stringify(t)),e=JSON.parse(JSON.stringify(e));var n=Object.assign({},t);return o(t)&&o(e)&&Object.keys(e).forEach(function(r){o(e[r])?r in t?n[r]=l(t[r],e[r]):Object.assign(n,(a={},a[r]=e[r],a)):Object.assign(n,(i={},i[r]=e[r],i));var a,i}),n}var u=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),c=this&&this.__decorate||function(t,e,n,r){var a,i=arguments.length,s=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,r);else for(var o=t.length-1;o>=0;o--)(a=t[o])&&(s=(i<3?a(s):i>3?a(e,n,s):a(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s},f=function(){return function(){}}();t.TranslateFakeLoader=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return u(e,t),e.prototype.getTranslation=function(t){return n.of({})},e}(f),t.TranslateFakeLoader=c([e.Injectable()],t.TranslateFakeLoader);var h=this&&this.__decorate||function(t,e,n,r){var a,i=arguments.length,s=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,r);else for(var o=t.length-1;o>=0;o--)(a=t[o])&&(s=(i<3?a(s):i>3?a(e,n,s):a(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s},g=function(){return function(){}}();t.FakeMissingTranslationHandler=function(){function t(){}return t.prototype.handle=function(t){return t.key},t}(),t.FakeMissingTranslationHandler=h([e.Injectable()],t.FakeMissingTranslationHandler);var p=this&&this.__decorate||function(t,e,n,r){var a,i=arguments.length,s=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,r);else for(var o=t.length-1;o>=0;o--)(a=t[o])&&(s=(i<3?a(s):i>3?a(e,n,s):a(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s},d=function(){return function(){}}();t.TranslateFakeCompiler=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return u(e,t),e.prototype.compile=function(t,e){return t},e.prototype.compileTranslations=function(t,e){return t},e}(d),t.TranslateFakeCompiler=p([e.Injectable()],t.TranslateFakeCompiler);var y=this&&this.__decorate||function(t,e,n,r){var a,i=arguments.length,s=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,r);else for(var o=t.length-1;o>=0;o--)(a=t[o])&&(s=(i<3?a(s):i>3?a(e,n,s):a(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s},b=function(){return function(){}}();t.TranslateDefaultParser=function(t){function e(){var e=t.apply(this,arguments)||this;return e.templateMatcher=/{{\s?([^{}\s]*)\s?}}/g,e}return u(e,t),e.prototype.interpolate=function(t,e){return"string"==typeof t?this.interpolateString(t,e):"function"==typeof t?this.interpolateFunction(t,e):t},e.prototype.getValue=function(t,e){var n=e.split(".");e="";do{e+=n.shift(),!s(t)||!s(t[e])||"object"!=typeof t[e]&&n.length?n.length?e+=".":t=undefined:(t=t[e],e="")}while(n.length);return t},e.prototype.interpolateFunction=function(t,e){return t(e)},e.prototype.interpolateString=function(t,e){var n=this;return e?t.replace(this.templateMatcher,function(t,r){var a=n.getValue(e,r);return s(a)?a:t}):t},e}(b),t.TranslateDefaultParser=y([e.Injectable()],t.TranslateDefaultParser);var v=function(){return function(){this.currentLang=this.defaultLang,this.translations={},this.langs=[],this.onTranslationChange=new e.EventEmitter,this.onLangChange=new e.EventEmitter,this.onDefaultLangChange=new e.EventEmitter}}(),L=this&&this.__decorate||function(t,e,n,r){var a,i=arguments.length,s=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,r);else for(var o=t.length-1;o>=0;o--)(a=t[o])&&(s=(i<3?a(s):i>3?a(e,n,s):a(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s},m=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},C=this&&this.__param||function(t,e){return function(n,r){e(n,r,t)}},T=new e.InjectionToken("USE_STORE"),_=new e.InjectionToken("USE_DEFAULT_LANG");t.TranslateService=function(){function t(t,n,r,a,i,s,o){void 0===s&&(s=!0),void 0===o&&(o=!1),this.store=t,this.currentLoader=n,this.compiler=r,this.parser=a,this.missingTranslationHandler=i,this.useDefaultLang=s,this.isolate=o,this.pending=!1,this._onTranslationChange=new e.EventEmitter,this._onLangChange=new e.EventEmitter,this._onDefaultLangChange=new e.EventEmitter,this._langs=[],this._translations={},this._translationRequests={}}return Object.defineProperty(t.prototype,"onTranslationChange",{get:function(){return this.isolate?this._onTranslationChange:this.store.onTranslationChange},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"onLangChange",{get:function(){return this.isolate?this._onLangChange:this.store.onLangChange},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"onDefaultLangChange",{get:function(){return this.isolate?this._onDefaultLangChange:this.store.onDefaultLangChange},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"defaultLang",{get:function(){return this.isolate?this._defaultLang:this.store.defaultLang},set:function(t){this.isolate?this._defaultLang=t:this.store.defaultLang=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"currentLang",{get:function(){return this.isolate?this._currentLang:this.store.currentLang},set:function(t){this.isolate?this._currentLang=t:this.store.currentLang=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"langs",{get:function(){return this.isolate?this._langs:this.store.langs},set:function(t){this.isolate?this._langs=t:this.store.langs=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"translations",{get:function(){return this.isolate?this._translations:this.store.translations},set:function(t){this.isolate?this._currentLang=t:this.store.translations=t},enumerable:!0,configurable:!0}),t.prototype.setDefaultLang=function(t){var e=this;if(t!==this.defaultLang){var n=this.retrieveTranslations(t);void 0!==n?(this.defaultLang||(this.defaultLang=t),n.pipe(a.take(1)).subscribe(function(n){e.changeDefaultLang(t)})):this.changeDefaultLang(t)}},t.prototype.getDefaultLang=function(){return this.defaultLang},t.prototype.use=function(t){var e=this;if(t===this.currentLang)return n.of(this.translations[t]);var r=this.retrieveTranslations(t);return void 0!==r?(this.currentLang||(this.currentLang=t),r.pipe(a.take(1)).subscribe(function(n){e.changeLang(t)}),r):(this.changeLang(t),n.of(this.translations[t]))},t.prototype.retrieveTranslations=function(t){var e;return"undefined"==typeof this.translations[t]&&(this._translationRequests[t]=this._translationRequests[t]||this.getTranslation(t),e=this._translationRequests[t]),e},t.prototype.getTranslation=function(t){var e=this;return this.pending=!0,this.loadingTranslations=this.currentLoader.getTranslation(t).pipe(a.share()),this.loadingTranslations.pipe(a.take(1)).subscribe(function(n){e.translations[t]=e.compiler.compileTranslations(n,t),e.updateLangs(),e.pending=!1},function(t){e.pending=!1}),this.loadingTranslations},t.prototype.setTranslation=function(t,e,n){void 0===n&&(n=!1),e=this.compiler.compileTranslations(e,t),n&&this.translations[t]?this.translations[t]=l(this.translations[t],e):this.translations[t]=e,this.updateLangs(),this.onTranslationChange.emit({lang:t,translations:this.translations[t]})},t.prototype.getLangs=function(){return this.langs},t.prototype.addLangs=function(t){var e=this;t.forEach(function(t){-1===e.langs.indexOf(t)&&e.langs.push(t)})},t.prototype.updateLangs=function(){this.addLangs(Object.keys(this.translations))},t.prototype.getParsedResult=function(t,e,r){var i;if(e instanceof Array){for(var s={},o=!1,l=0,u=e;l<u.length;l++){s[g=u[l]]=this.getParsedResult(t,g,r),"function"==typeof s[g].subscribe&&(o=!0)}if(o){for(var c=void 0,f=0,h=e;f<h.length;f++){var g=h[f],p="function"==typeof s[g].subscribe?s[g]:n.of(s[g]);c=void 0===c?p:c.pipe(a.merge(p))}return c.pipe(a.toArray(),a.map(function(t){var n={};return t.forEach(function(t,r){n[e[r]]=t}),n}))}return s}if(t&&(i=this.parser.interpolate(this.parser.getValue(t,e),r)),void 0===i&&this.defaultLang&&this.defaultLang!==this.currentLang&&this.useDefaultLang&&(i=this.parser.interpolate(this.parser.getValue(this.translations[this.defaultLang],e),r)),void 0===i){var d={key:e,translateService:this};void 0!==r&&(d.interpolateParams=r),i=this.missingTranslationHandler.handle(d)}return void 0!==i?i:e},t.prototype.get=function(t,e){var a=this;if(!s(t)||!t.length)throw new Error('Parameter "key" required');if(this.pending)return r.Observable.create(function(n){var r=function(t){n.next(t),n.complete()},i=function(t){n.error(t)};a.loadingTranslations.subscribe(function(n){"function"==typeof(n=a.getParsedResult(n,t,e)).subscribe?n.subscribe(r,i):r(n)},i)});var i=this.getParsedResult(this.translations[this.currentLang],t,e);return"function"==typeof i.subscribe?i:n.of(i)},t.prototype.stream=function(t,e){var r=this;if(!s(t)||!t.length)throw new Error('Parameter "key" required');return this.get(t,e).pipe(a.concat(this.onLangChange.pipe(a.switchMap(function(a){var i=r.getParsedResult(a.translations,t,e);return"function"==typeof i.subscribe?i:n.of(i)}))))},t.prototype.instant=function(t,e){if(!s(t)||!t.length)throw new Error('Parameter "key" required');var n=this.getParsedResult(this.translations[this.currentLang],t,e);if("undefined"!=typeof n.subscribe){if(t instanceof Array){var r={};return t.forEach(function(e,n){r[t[n]]=t[n]}),r}return t}return n},t.prototype.set=function(t,e,n){void 0===n&&(n=this.currentLang),this.translations[n][t]=this.compiler.compile(e,n),this.updateLangs(),this.onTranslationChange.emit({lang:n,translations:this.translations[n]})},t.prototype.changeLang=function(t){this.currentLang=t,this.onLangChange.emit({lang:t,translations:this.translations[t]}),this.defaultLang||this.changeDefaultLang(t)},t.prototype.changeDefaultLang=function(t){this.defaultLang=t,this.onDefaultLangChange.emit({lang:t,translations:this.translations[t]})},t.prototype.reloadLang=function(t){return this.resetLang(t),this.getTranslation(t)},t.prototype.resetLang=function(t){this._translationRequests[t]=undefined,this.translations[t]=undefined},t.prototype.getBrowserLang=function(){if("undefined"==typeof window||"undefined"==typeof window.navigator)return undefined;var t=window.navigator.languages?window.navigator.languages[0]:null;return-1!==(t=t||window.navigator.language||window.navigator.browserLanguage||window.navigator.userLanguage).indexOf("-")&&(t=t.split("-")[0]),-1!==t.indexOf("_")&&(t=t.split("_")[0]),t},t.prototype.getBrowserCultureLang=function(){if("undefined"==typeof window||"undefined"==typeof window.navigator)return undefined;var t=window.navigator.languages?window.navigator.languages[0]:null;return t=t||window.navigator.language||window.navigator.browserLanguage||window.navigator.userLanguage},t}(),t.TranslateService=L([e.Injectable(),C(5,e.Inject(_)),C(6,e.Inject(T)),m("design:paramtypes",[v,f,d,b,g,Boolean,Boolean])],t.TranslateService);var j=this&&this.__decorate||function(t,e,n,r){var a,i=arguments.length,s=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,r);else for(var o=t.length-1;o>=0;o--)(a=t[o])&&(s=(i<3?a(s):i>3?a(e,n,s):a(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s},P=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)};t.TranslateDirective=function(){function t(t,e,n){var r=this;this.translateService=t,this.element=e,this._ref=n,this.onTranslationChangeSub||(this.onTranslationChangeSub=this.translateService.onTranslationChange.subscribe(function(t){t.lang===r.translateService.currentLang&&r.checkNodes(!0,t.translations)})),this.onLangChangeSub||(this.onLangChangeSub=this.translateService.onLangChange.subscribe(function(t){r.checkNodes(!0,t.translations)})),this.onDefaultLangChangeSub||(this.onDefaultLangChangeSub=this.translateService.onDefaultLangChange.subscribe(function(t){r.checkNodes(!0)}))}return Object.defineProperty(t.prototype,"translate",{set:function(t){t&&(this.key=t,this.checkNodes())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"translateParams",{set:function(t){i(this.currentParams,t)||(this.currentParams=t,this.checkNodes(!0))},enumerable:!0,configurable:!0}),t.prototype.ngAfterViewChecked=function(){this.checkNodes()},t.prototype.checkNodes=function(t,e){void 0===t&&(t=!1);var n=this.element.nativeElement.childNodes;n.length||(this.setContent(this.element.nativeElement,this.key),n=this.element.nativeElement.childNodes);for(var r=0;r<n.length;++r){var a=n[r];if(3===a.nodeType){var i=void 0;if(this.key)i=this.key,t&&(a.lastKey=null);else{var s=this.getContent(a).trim();s.length&&(s!==a.currentValue?(i=s,a.originalContent=this.getContent(a)):a.originalContent&&t&&(a.lastKey=null,i=a.originalContent.trim()))}this.updateValue(i,a,e)}}},t.prototype.updateValue=function(t,e,n){var r=this;if(t){if(e.lastKey===t&&this.lastParams===this.currentParams)return;this.lastParams=this.currentParams;var a=function(n){n!==t&&(e.lastKey=t),e.originalContent||(e.originalContent=r.getContent(e)),e.currentValue=s(n)?n:e.originalContent||t,r.setContent(e,r.key?e.currentValue:e.originalContent.replace(t,e.currentValue)),r._ref.markForCheck()};if(s(n)){var i=this.translateService.getParsedResult(n,t,this.currentParams);"function"==typeof i.subscribe?i.subscribe(a):a(i)}else this.translateService.get(t,this.currentParams).subscribe(a)}},t.prototype.getContent=function(t){return s(t.textContent)?t.textContent:t.data},t.prototype.setContent=function(t,e){s(t.textContent)?t.textContent=e:t.data=e},t.prototype.ngOnDestroy=function(){this.onLangChangeSub&&this.onLangChangeSub.unsubscribe(),this.onDefaultLangChangeSub&&this.onDefaultLangChangeSub.unsubscribe(),this.onTranslationChangeSub&&this.onTranslationChangeSub.unsubscribe()},t}(),j([e.Input(),P("design:type",String),P("design:paramtypes",[String])],t.TranslateDirective.prototype,"translate",null),j([e.Input(),P("design:type",Object),P("design:paramtypes",[Object])],t.TranslateDirective.prototype,"translateParams",null),t.TranslateDirective=j([e.Directive({selector:"[translate],[ngx-translate]"}),P("design:paramtypes",[t.TranslateService,e.ElementRef,e.ChangeDetectorRef])],t.TranslateDirective);var O=this&&this.__decorate||function(t,e,n,r){var a,i=arguments.length,s=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,r);else for(var o=t.length-1;o>=0;o--)(a=t[o])&&(s=(i<3?a(s):i>3?a(e,n,s):a(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s},w=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)};t.TranslatePipe=function(){function t(t,e){this.translate=t,this._ref=e,this.value=""}return t.prototype.updateValue=function(t,e,n){var r=this,a=function(e){r.value=e!==undefined?e:t,r.lastKey=t,r._ref.markForCheck()};if(n){var i=this.translate.getParsedResult(n,t,e);"function"==typeof i.subscribe?i.subscribe(a):a(i)}this.translate.get(t,e).subscribe(a)},t.prototype.transform=function(t){for(var e=this,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];if(!t||0===t.length)return t;if(i(t,this.lastKey)&&i(n,this.lastParams))return this.value;var a;if(s(n[0])&&n.length)if("string"==typeof n[0]&&n[0].length){var o=n[0].replace(/(\')?([a-zA-Z0-9_]+)(\')?(\s)?:/g,'"$2":').replace(/:(\s)?(\')(.*?)(\')/g,':"$3"');try{a=JSON.parse(o)}catch(l){throw new SyntaxError("Wrong parameter in TranslatePipe. Expected a valid Object, received: "+n[0])}}else"object"!=typeof n[0]||Array.isArray(n[0])||(a=n[0]);return this.lastKey=t,this.lastParams=n,this.updateValue(t,a),this._dispose(),this.onTranslationChange||(this.onTranslationChange=this.translate.onTranslationChange.subscribe(function(n){e.lastKey&&n.lang===e.translate.currentLang&&(e.lastKey=null,e.updateValue(t,a,n.translations))})),this.onLangChange||(this.onLangChange=this.translate.onLangChange.subscribe(function(n){e.lastKey&&(e.lastKey=null,e.updateValue(t,a,n.translations))})),this.onDefaultLangChange||(this.onDefaultLangChange=this.translate.onDefaultLangChange.subscribe(function(){e.lastKey&&(e.lastKey=null,e.updateValue(t,a))})),this.value},t.prototype._dispose=function(){"undefined"!=typeof this.onTranslationChange&&(this.onTranslationChange.unsubscribe(),this.onTranslationChange=undefined),"undefined"!=typeof this.onLangChange&&(this.onLangChange.unsubscribe(),this.onLangChange=undefined),"undefined"!=typeof this.onDefaultLangChange&&(this.onDefaultLangChange.unsubscribe(),this.onDefaultLangChange=undefined)},t.prototype.ngOnDestroy=function(){this._dispose()},t}(),t.TranslatePipe=O([e.Injectable(),e.Pipe({name:"translate",pure:!1}),w("design:paramtypes",[t.TranslateService,e.ChangeDetectorRef])],t.TranslatePipe);var R=this&&this.__decorate||function(t,e,n,r){var a,i=arguments.length,s=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,r);else for(var o=t.length-1;o>=0;o--)(a=t[o])&&(s=(i<3?a(s):i>3?a(e,n,s):a(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s};t.TranslateModule=D=function(){function e(){}return e.forRoot=function(e){return void 0===e&&(e={}),{ngModule:D,providers:[e.loader||{provide:f,useClass:t.TranslateFakeLoader},e.compiler||{provide:d,useClass:t.TranslateFakeCompiler},e.parser||{provide:b,useClass:t.TranslateDefaultParser},e.missingTranslationHandler||{provide:g,useClass:t.FakeMissingTranslationHandler},v,{provide:T,useValue:e.isolate},{provide:_,useValue:e.useDefaultLang},t.TranslateService]}},e.forChild=function(e){return void 0===e&&(e={}),{ngModule:D,providers:[e.loader||{provide:f,useClass:t.TranslateFakeLoader},e.compiler||{provide:d,useClass:t.TranslateFakeCompiler},e.parser||{provide:b,useClass:t.TranslateDefaultParser},e.missingTranslationHandler||{provide:g,useClass:t.FakeMissingTranslationHandler},{provide:T,useValue:e.isolate},{provide:_,useValue:e.useDefaultLang},t.TranslateService]}},e}(),t.TranslateModule=D=R([e.NgModule({declarations:[t.TranslatePipe,t.TranslateDirective],exports:[t.TranslatePipe,t.TranslateDirective]})],t.TranslateModule);var D;t.Éµa=v,t.TranslateLoader=f,t.USE_STORE=T,t.USE_DEFAULT_LANG=_,t.MissingTranslationHandler=g,t.TranslateParser=b,t.TranslateCompiler=d,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=core.umd.min.js.map
